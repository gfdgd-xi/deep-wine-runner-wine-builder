name: Building Wine 7z Package (termux)
run-name: ${{ github.actor }} Building Wine 7z Package (termux) ğŸš€
on:
  push:
  workflow_dispatch:
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - name: Config Environment
        run: |
          cd ~
          sudo apt install openjdk-17-jdk git -y
          git clone https://github.com/gfdgd-xi/auto-building-wine
          git clone https://github.com/termux/termux-packages/
          version=`cat auto-building-wine/wine-version.txt`
          cd termux-packages
          # ä¿®æ”¹ç‰ˆæœ¬å·
          line=$(cat x11-packages/wine-stable/build.sh | grep TERMUX_PKG_VERSION=)
          sed -i "s/$line/TERMUX_PKG_VERSION=$version/g" x11-packages/wine-stable/build.sh
          cat x11-packages/wine-stable/build.sh
          # é…ç½® sdk
          bash ./scripts/setup-android-sdk.sh
          # æ­£ç¡®é…ç½® /data æƒé™
          sudo mkdir /data -p
          sudo chmod 777 -Rv /data
          sudo chown runner:runner -Rv /data
      
      - name: Building Wine (x86_64)
        run: |
          cd ~/termux-packages
          bash ./build-package.sh -a x86_64 wine-stable

      - name: Pack Tar (x86_64)
        run: |
          cd ~/termux-packages/output
          tar -cvf ~/deb.tar *

      - name: upload result
        uses: actions/upload-artifact@v1
        with:
          name: deb
          path: /home/runner/deb.tar

      